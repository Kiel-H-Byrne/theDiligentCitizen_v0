[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar MongoInternals = Package.mongo.MongoInternals;\nvar Mongo = Package.mongo.Mongo;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// packages/okgrow_analytics/server/browser-policy.js                   //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n                                                                        //\nif (Package[\"browser-policy-common\"]) {                                 // 1\n  var content = Package['browser-policy-common'].BrowserPolicy.content;\n  if (content) {                                                        // 3\n    content.allowOriginForAll(\"www.google-analytics.com\");              // 4\n    content.allowOriginForAll(\"cdn.mxpnl.com\");                         // 5\n  }                                                                     // 6\n}                                                                       // 7\n                                                                        // 8\n//////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// packages/okgrow_analytics/server/publications.js                     //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n                                                                        //\nMeteor.publish(null, function() {                                       // 1\n  if(this.userId) {                                                     // 2\n    var self = this;                                                    // 3\n    var query = Meteor.users.find(                                      // 4\n      {_id: this.userId},                                               // 5\n      {fields: {                                                        // 6\n                  emails: 1,                                            // 7\n                  'services.facebook.email': 1,                         // 8\n                  'services.google.email': 1,                           // 9\n                  'services.github.email': 1 }});                       // 10\n                                                                        // 11\n    Mongo.Collection._publishCursor(query, self, 'analyticsusers');     // 12\n    return self.ready();                                                // 13\n                                                                        // 14\n  } else {                                                              // 15\n    this.ready();                                                       // 16\n  }                                                                     // 17\n});                                                                     // 18\n                                                                        // 19\n//////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['okgrow:analytics'] = {};\n\n})();\n","servePath":"/packages/okgrow_analytics.js","sourceMap":{"version":3,"sources":["/packages/okgrow_analytics/server/browser-policy.js","/packages/okgrow_analytics/server/publications.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4E;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6E","file":"/packages/okgrow_analytics.js","sourcesContent":["if (Package[\"browser-policy-common\"]) {\n  var content = Package['browser-policy-common'].BrowserPolicy.content;\n  if (content) {\n    content.allowOriginForAll(\"www.google-analytics.com\");\n    content.allowOriginForAll(\"cdn.mxpnl.com\");\n  }\n}\n","Meteor.publish(null, function() {\n  if(this.userId) {\n    var self = this;\n    var query = Meteor.users.find(\n      {_id: this.userId},\n      {fields: {\n                  emails: 1,\n                  'services.facebook.email': 1,\n                  'services.google.email': 1,\n                  'services.github.email': 1 }});\n\n    Mongo.Collection._publishCursor(query, self, 'analyticsusers');\n    return self.ready();\n\n  } else {\n    this.ready();\n  }\n});\n"]}}]