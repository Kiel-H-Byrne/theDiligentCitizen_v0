{"version":3,"sources":["meteor://ðŸ’»app/client/js/myDistrict.js"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;;AAE/B,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAE;AAC5B,SAAQ,EAAE,YAAW;;AAEpB,MAAI,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;;AAElC,MAAI,MAAM,GAAG,kBAAkB,CAAC;AAChC,MAAI,MAAM,GAAG,EAAE,CAAC;AACjB,MAAI,MAAM,EAAE;;AAEV,OAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;AAC3B,UAAM,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;AACrC,UAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;IAC3B,MAAM;AACN,UAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1C,UAAM,CAAC,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C;AACA,YAAS,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AAClC,SAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,SAAS,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;;AAE5D,QAAI,GAAG,EAAE;AACR,YAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;AACzD,YAAO,CAAC,GAAG,CAAC,OAAO,EAAE,EAAC,KAAK,EAAE,GAAG,EAAC,CAAC,CAAC;KACpC,MAAM;AACN,QAAG,GAAG,GAAG,CAAC,OAAO,CAAC;;;;AAIpB,WAAM,CAAC,SAAS,GAAG,GAAG,CAAC;AACvB,WAAM,CAAC,MAAM,GAAG,SAAS,CAAC;AAC1B,WAAM,CAAC,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;;AAEtC,YAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;KAC/B;IACF,CAAC,CAAC;AACJ,UAAO,MAAM,CAAC;GACb;EACF;AACD,YAAW,EAAE,YAAW;AACvB,MAAI,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAClC,MAAI,MAAM,EAAE;;;AAGX,OAAI,MAAM,GAAG,oBAAoB,CAAC;AAClC,OAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,OAAI,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;AAC1C,UAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;IAC3B,MAAM;AACN,UAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3C,UAAM,CAAC,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C;;AAEA,YAAS,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AAClC,SAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,SAAS,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;;AAE5D,QAAI,GAAG,EAAE;AACP,YAAO,CAAC,GAAG,CAAC,OAAO,EAAE,EAAC,KAAK,EAAE,GAAG,EAAC,CAAC,CAAC;KACpC,MAAM;AACN,QAAG,GAAG,GAAG,CAAC,OAAO,CAAC;;AAEpB,YAAO,CAAC,GAAG,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;;AAE7B,YAAO,GAAG,CAAC;KACZ;IACF,CAAC,CAAC;AACL,OAAI,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAC3C,UAAO,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA0CpB;EACD;AACD,YAAW,EAAE,YAAW;;AAEvB,MAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;;AAEvB,MAAI,KAAK,IAAI,GAAG,EAAE;AAAC,UAAO,MAAM;GAAC,MAC3B,IAAI,KAAK,IAAG,GAAG,EAAE;AAAC,UAAO,KAAK;GAAC,MAC9B;AAAC,UAAO,OAAO;GAAC;EACvB;;CAED,CAAC,CAAC,sE","file":"/client/js/myDistrict.js","sourcesContent":["console.log(\"--myDistrict.js\");\n\nTemplate.myDistrict.helpers ({\n\tlocation: function() {\n\t\t//if ipInfo object exists, abbreviate the state and add it to the object.\n\t\tvar ipInfo = Session.get('ipInfo');\n\t  //using zipcode to return user district and state;\n\t  var method = 'districts/locate';\n\t  var params = {};\n\t\tif (ipInfo) {  \n\t\t\t//when 'newZip' changes, this view rerenders and makes a new call for district.\n\t\t  if (Session.get('newZip')) {\n\t\t\t\tipInfo.postal = Session.get('newZip')\n\t\t\t\tparams.zip = ipInfo.postal;\n\t\t\t} else { \n\t\t\t\tparams.latitude = ipInfo.loc.split(\",\")[0];\n\t\t\t \tparams.longitude = ipInfo.loc.split(\",\")[1];\n\t\t\t}\n\t\t  urlParams = jQuery.param(params);\n\t\t\tMeteor.call('sunLight', method, urlParams, function (err, res) {\n\t\t    // The method call sets the Session variable to the callback value\n\t\t    if (err) { \n\t\t    \tconsole.log(\"!!! ERROR with sunLight call in myDistrict\");\n\t\t      Session.set('query', {error: err});\n\t\t    } else {\n\t\t    \tres = res.results;\n\t\t    \t//console.log(\"Sesh-district: \" + res.district);\n\n\t\t    \t//adding ipInfo Object: districts, params, state\n\t\t\t\t\tipInfo.districts = res;\n\t\t\t\t\tipInfo.params = urlParams;\n\t\t\t\t\tipInfo.state = ipInfo.districts[0].state;\n\t\t\t\t\t//console.log(ipInfo.state);\n\t\t      Session.set('ipInfo', ipInfo);\n\t\t    }\n\t\t  });\t  \n\t\t\treturn ipInfo;\n\t  }\n\t},\n\tlegislators: function() {\n\t\tvar ipInfo = Session.get('ipInfo');\n\t  if (ipInfo) {\n  \t  //using lat/long to find user district (more precise than zip);\n\t\t  //var method = 'districts/locate';\n\t\t  var method = 'legislators/locate';\n\t\t  var params = {};\n\n\t\t  if (ipInfo.postal = Session.get('newZip')) {\n\t\t  \tparams.zip = ipInfo.postal;\n\t\t  } else { \n\t\t  \tparams.latitude = ipInfo.loc.split(\",\")[0];\n\t\t\t \tparams.longitude = ipInfo.loc.split(\",\")[1];\n\t\t\t}\n\t\t  \n\t\t  urlParams = jQuery.param(params);\n\t\t\tMeteor.call('sunLight', method, urlParams, function (err, res) {\n\t\t    // The method call sets the Session variable to the callback value\n\t\t    if (err) { \n\t\t      Session.set('query', {error: err});\n\t\t    } else {\n\t\t    \tres = res.results;\n\t\t    \t//console.log(\"Sesh-district: \" + res.district);\n\t\t\t\t\tSession.set('legislators', res);\n\t\t\t\t\t//console.log(res[0]);\n\t\t      return res;\n\t\t    }\n\t\t  });\n\t\tvar legislators = Session.get('legislators');\n    return legislators;\n\n/*\n{ \n\tbioguide_id: 'C000141',\n\tbirthday: '1943-10-05',\n\tchamber: 'senate',\n\tcontact_form: 'http://www.cardin.senate.gov/contact/',\n\tcrp_id: 'N00001955',\n\tdistrict: null,\n\tfacebook_id: '120421834675191',\n\tfax: '202-224-1651',\n\tfec_ids: [Object],\n\tfirst_name: 'Benjamin',\n\tgender: 'M',\n\tgovtrack_id: '400064',\n\ticpsr_id: 15408,\n\tin_office: true,\n\tlast_name: 'Cardin',\n\tlis_id: 'S308',\n\tmiddle_name: 'L.',\n\tname_suffix: null,\n\tnickname: null,\n\toc_email: 'Sen.Cardin@opencongress.org',\n\tocd_id: 'ocd-division/country:us/state:md',\n\toffice: '509 Hart Senate Office Building',\n\tparty: 'D',\n\tphone: '202-224-4524',\n\tsenate_class: 1,\n\tstate: 'MD',\n\tstate_name: 'Maryland',\n\tstate_rank: 'junior',\n\tterm_end: '2019-01-03',\n\tterm_start: '2013-01-03',\n\tthomas_id: '00174',\n\ttitle: 'Sen',\n\ttwitter_id: 'SenatorCardin',\n\tvotesmart_id: 26888,\n\twebsite: 'http://www.cardin.senate.gov',\n\tyoutube_id: 'senatorcardin' \n}\n*/\n\t\t}\t\n\t},\n\tparty_color: function() {\n\t\t//var reps = Session.get('legislators');\n\t\tvar party = this.party;\n\t\t\n\t\tif (party == \"D\") {return \"blue\"}\n\t\t\telse if (party ==\"R\") {return \"red\"}\n\t\t\t\telse {return \"green\"}\n\t}\n\n});"]}